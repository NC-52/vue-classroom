webpackJsonp([1],{"/W8b":function(t,e){},"3lAI":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("K3J8"),s("SSNS"),s("tvR6");var a=s("7+uW"),n=s("NYxO"),i=s("/ocq"),o=s("9JMe"),r=s("zL8q"),l=s.n(r),u=s("cHML"),d=s.n(u),c=s("mtWM"),m=s.n(c),f=s("Dd8w"),p=s.n(f),h=function(t,e,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",n=new Date;s=s||730,n.setTime(n.getTime()+60*s*60*24*1e3);var i=t+"="+e+("; expires="+n.toGMTString())+"; path="+a;document.cookie=i},g=function(t){var e=" "+document.cookie,s=e.indexOf(t);if(void 0===t||""===t||-1===s)return"";var a=e.indexOf(";",s);return-1===a&&(a=e.length),unescape(e.substring(s+t.length+1,a))},v={name:"GlobalNavbar",data:function(){return{keyword:"",isBeta:"true"===g("isBeta"),isBetaCookieName:"isBeta"}},computed:p()({},Object(n.e)("Classroom",["loading","classrooms"]),Object(n.e)("Search",{searchRawResults:function(t){return t.rawResult},searchTimeout:function(t){return t.timeout}}),Object(n.c)("Classroom",["classroomMap"]),Object(n.c)("Search",{searchResult:"result"})),methods:p()({},Object(n.b)("Classroom",["loadClassrooms"]),Object(n.b)("Search",["search"]),Object(n.d)("Search",["setRawResult","setKeyword","setSearchTimeout"]),{querySearchAsync:function(t,e){var s=this;this.search(),clearTimeout(this.searchTimeout),this.setSearchTimeout(setTimeout(function(t){e(s.searchResult)},1e3))},handleSelect:function(t){var e={name:"classroom.show"};switch(t.role){case"students":e.params={classId:t.data.class_id},e.query={student:t.data.id};break;case"classrooms":e.params={classId:t.data.id},this.$message({message:"前往 "+t.value,type:"success"});break;default:return void this.$message(t.name)}this.$router.push(e)}}),watch:{keyword:function(t){this.setKeyword(t)},isBeta:function(t){h(this.isBetaCookieName,t,1)}},mounted:function(){this.loadClassrooms()}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-header",{staticClass:"card-shadow-xs",attrs:{id:"global-navbar"}},[s("el-container",{staticClass:"global-navbar-container container"},[s("div",{staticClass:"logo-wrapper hidden-xs"},[s("router-link",{staticClass:"logo-container",attrs:{to:{name:"homepage"}}},[s("figure",{staticClass:"logo"},[s("img",{staticClass:"logo-img",attrs:{src:"https://png.icons8.com/ios/540/finn.png",alt:""}})]),t._v(" "),s("figure",{staticClass:"hi"},[s("img",{attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQc40S0ZeCHpQGVJO3PRQCG753Fhnl498Sim2D8J6bgL7rCJ22F",alt:""}})])]),t._v(" "),s("el-checkbox",{staticClass:"checkbox-beta",model:{value:t.isBeta,callback:function(e){t.isBeta=e},expression:"isBeta"}},[t._v("\n        "+t._s(t.isBeta?"beta":"")+"\n      ")])],1),t._v(" "),s("el-row",[s("ul",{staticClass:"list"},[s("li",{staticClass:"list-item"},[s("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"請輸入關鍵字"},on:{select:t.handleSelect},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),s("li",{staticClass:"list-item"},[s("el-dropdown",[s("span",{staticClass:"el-dropdown-link"},[t._v("\n              班級"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.classroomMap,function(e,a){return s("router-link",{key:e.id,attrs:{to:{name:"classroom.show",params:{classId:a}}}},[s("el-dropdown-item",[t._v("\n                  "+t._s(e)+"\n                ")])],1)}))],1)],1),t._v(" "),t.isBeta?s("li",{staticClass:"list-item"},[s("router-link",{attrs:{to:{name:"student.list"}}},[t._v("\n            學生列表\n          ")])],1):t._e(),t._v(" "),t.isBeta?s("li",{staticClass:"list-item"},[s("router-link",{attrs:{to:{name:"student.create"}}},[t._v("\n            新增學生\n          ")])],1):t._e()])])],1)],1)},staticRenderFns:[]};var _={name:"app",components:{GlobalNavbar:s("VU/8")(v,b,!1,function(t){s("wkMQ")},"data-v-0d56c874",null).exports},methods:p()({},Object(n.d)("Site",["updateWindow"]),{listenWindowResize:function(){var t=this;window.addEventListener("resize",function(e){var s=e.target,a={width:s.innerWidth,height:s.innerHeight};t.updateWindow(a)})}}),mounted:function(){this.listenWindowResize()}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("GlobalNavbar"),this._v(" "),e("div",{staticClass:"content-wrapper"},[e("router-view")],1)],1)},staticRenderFns:[]};var j=s("VU/8")(_,w,!1,function(t){s("3lAI")},null,null).exports,y={name:"Homepage",data:function(){return{}},computed:p()({},Object(n.e)("Classroom",{classrooms:function(t){return t.classrooms},classroomLoading:function(t){return t.loading}})),methods:{goToClassroom:function(t){var e=t.id;this.$router.push({name:"classroom.show",params:{classId:e}})}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.classroomLoading.classrooms,expression:"classroomLoading.classrooms"}],staticClass:"container"},[s("el-table",{staticClass:"classroom-table",attrs:{data:t.classrooms,"empty-text":"查無資料"}},[s("el-table-column",{attrs:{prop:"name",label:"名稱"}}),t._v(" "),s("el-table-column",{attrs:{label:"前往班級",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{on:{click:function(s){t.goToClassroom(e.row)}}},[t._v("\n          前往\n        ")])]}}])})],1)],1)},staticRenderFns:[]};var k=s("VU/8")(y,C,!1,function(t){s("/W8b")},"data-v-35e2ecfa",null).exports,F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"student-wrapper"},[e("router-view")],1)},staticRenderFns:[]},S=s("VU/8")({name:"Student"},F,!1,null,null,null).exports,x="https://still-everglades-62877.herokuapp.com/api/students",L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return x+"/"+t},N=function(){return""+x},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return x+"/"+t},$="https://still-everglades-62877.herokuapp.com/api/classrooms",z=function(){return""+$},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return $+"/"+t},E=function(){return""+$},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return $+"/"+t},K=function(){return"https://still-everglades-62877.herokuapp.com/api/search/"},P={data:function(){return{studentForm:{first_name:"",last_name:"",email:"",class_id:""},rules:{first_name:[{required:!0,message:"請輸入學生名字",trigger:"blur"},{min:1,max:100,message:"請輸入 1 到 100 個字元",trigger:"blur"}],last_name:[{required:!0,message:"請輸入學生姓氏",trigger:"blur"},{min:1,max:100,message:"請輸入 1 到 100 個字元",trigger:"blur"}],email:[{required:!0,message:"請輸入 Email",trigger:"blur"},{type:"email",message:"請輸入正確 Email",trigger:"blur,change"}],class_id:[{required:!0,message:"請選擇班級",trigger:"blur"}]},loading:{create:!1,update:!1}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.createUser()})},createUser:function(){var t=this,e=this.studentForm,s=N();a.default.set(this.loading,"create",!0),m.a.post(s,e).then(function(){t.$alert("成功新增學生","成功"),a.default.set(t.loading,"create",!1)}).catch(function(e){var s=e.message;t.$alert(s.data,"失敗"),a.default.set(t.loading,"create",!1)})}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",{staticClass:"container"},[s("div",{staticClass:"student-create-form"},[s("el-form",{ref:"studentForm",attrs:{model:t.studentForm,rules:t.rules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"姓氏",prop:"last_name"}},[s("el-input",{model:{value:t.studentForm.last_name,callback:function(e){t.$set(t.studentForm,"last_name",e)},expression:"studentForm.last_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"名字",prop:"first_name"}},[s("el-input",{model:{value:t.studentForm.first_name,callback:function(e){t.$set(t.studentForm,"first_name",e)},expression:"studentForm.first_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Email",prop:"email"}},[s("el-input",{model:{value:t.studentForm.email,callback:function(e){t.$set(t.studentForm,"email",e)},expression:"studentForm.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"班級",prop:"class_id"}},[s("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.studentForm.class_id,callback:function(e){t.$set(t.studentForm,"class_id",e)},expression:"studentForm.class_id"}},[s("el-option",{attrs:{label:"一班",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"二班",value:"2"}})],1)],1),t._v(" "),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.create,expression:"loading.create"}],attrs:{type:"primary"},on:{click:function(e){t.submitForm("studentForm")}}},[t.loading.create?s("span",[t._v("處理中...")]):t._e(),t._v(" "),t.loading.create?t._e():s("span",[t._v("新增學生")])])],1)],1)],1)])],1)},staticRenderFns:[]};var I=s("VU/8")(P,V,!1,function(t){s("uR6f")},"data-v-f4dc7ff0",null).exports,M=s("fZjL"),T=s.n(M),U={name:"StudentList",props:{pageName:String},data:function(){return{students:[{}],attributes:{id:"編號",class_id:"班級",first_name:"名",last_name:"姓",email:"email"},eidting:{},isEditing:{rowIndex:""},loading:{list:!1,update:!1}}},computed:{studentData:function(){return this.students.map(function(t){return{id:t.id,first_name:t.first_name,last_name:t.last_name,class_id:t.class_id,email:t.email}})},studentKeys:function(){return T()(this.studentData[0])}},methods:p()({},Object(n.b)("Student",["updateStudent"]),{loadStudents:function(){var t=this;a.default.set(this.loading,"list",!0),m.a.get(L()).then(function(e){var s=e.data;t.students=s.data,a.default.set(t.loading,"list",!1)}).catch(function(){a.default.set(t.loading,"list",!1)})},getAttr:function(t,e){return(e=e||this.attributes)[t]||t},toggleEditing:function(t){this.editing=this.students[t],a.default.set(this.isEditing,"rowIndex",t)},editStudent:function(t){var e=t.id,s=this.loading,n=this.isEditing,i=this.students.filter(function(t){return t.id===e})[0];a.default.set(this.loading,"update",!0),this.updateStudent({id:e,payload:i,successCallback:function(){a.default.set(s,"update",!1),a.default.set(n,"rowIndex","")},errorCallback:function(){a.default.set(s,"update",!1),a.default.set(n,"rowIndex","")}})}}),mounted:function(){this.loadStudents()}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("el-header",{staticClass:"text-left"},[s("h1",[t._v(t._s(t.pageName||"學生列表"))])]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.list,expression:"loading.list"}],attrs:{data:t.studentData}},[t._l(t.studentKeys,function(e){return s("el-table-column",{key:e.id,attrs:{label:t.getAttr(e),align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isEditing.rowIndex!==a.$index||"id"===e?s("span",{on:{dblclick:function(e){t.toggleEditing(a.$index)}}},[t._v("\n          "+t._s(a.row[e])+"\n        ")]):s("input",{staticClass:"input-editing",attrs:{type:"text"},domProps:{value:t.students[a.$index][e]},on:{input:function(s){t.$set(t.editing,e,s.target.value)}}})]}}])})}),t._v(" "),s("el-table-column",{attrs:{label:"動作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditing.rowIndex!==e.$index?s("el-button",{on:{click:function(s){t.toggleEditing(e.$index)}}},[t._v("\n              修改\n            ")]):s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"要按下「完成」才會儲存",placement:"bottom"}},[s("el-button",{attrs:{type:"success"},on:{click:function(s){t.editStudent(e.row)}}},[t._v("\n                完成\n              ")])],1)]}}])})],2)],1)},staticRenderFns:[]};var W=s("VU/8")(U,B,!1,function(t){s("WPnZ")},"data-v-56e96fa3",null).exports,H={path:"/student",name:"student",component:S,redirect:function(){return"/student/list"},children:[{path:"list",name:"student.list",component:W},{path:"create",name:"student.create",component:I},{path:"*",component:W}]},A=s("d7EF"),G=s.n(A),X=s("W3Iv"),D=s.n(X),J={first_name:"名",last_name:"姓",email:"Email"},Q={main:["#98abc5","#d0743c","#8a89a6","#ff8c00","#7b6888","#6b486b","#a05d56"]},Z={first_name:[{required:!0,message:"請輸入學生名字",trigger:"blur"},{min:1,max:100,message:"請輸入 1 到 100 個字元",trigger:"blur"}],last_name:[{required:!0,message:"請輸入學生姓氏",trigger:"blur"},{min:1,max:100,message:"請輸入 1 到 100 個字元",trigger:"blur"}],email:[{required:!0,message:"請輸入 Email",trigger:"blur"},{type:"email",message:"請輸入正確 Email",trigger:"blur,change"}],class_id:[{required:!0,message:"請選擇班級",trigger:"blur"}]},Y={name:[{required:!0,message:"請輸入班級名稱",trigger:"blur"},{min:1,max:100,message:"請輸入 1 到 100 個字元",trigger:"blur"}]},tt=s("WaEV"),et=s.n(tt),st={name:"ChartPie",props:{pieConfig:Object},data:function(){return{pieInstance:null}},computed:p()({},Object(n.e)("Site",{windowWidth:function(t){return t.windowSize.width}}),Object(n.c)("Site",["isMobile"])),methods:{createPie:function(){var t=this.$refs.chart.getContext("2d"),e=this.pieConfig;this.pieInstance=new et.a(t,e)},redrawPie:function(){this.pieInstance.destroy(),this.createPie()}},watch:{pieConfig:function(){this.redrawPie()},windowWidth:function(){this.isMobile&&this.redrawPie()}},mounted:function(){this.createPie()}},at={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"chart"})},staticRenderFns:[]},nt={components:{ChartPie:s("VU/8")(st,at,!1,null,null,null).exports},props:{classId:[Number,String]},data:function(){return{isNew:{student:!1,classroom:!1},dialogVisible:{student:!1,classroom:!1},classroomForm:{},studnetAttributes:J,studentForm:{first_name:"",last_name:"",email:"",class_id:""},studentFormProp:{first_name:"",last_name:"",email:"",class_id:""},rules:{student:Z,classroom:Y}}},computed:p()({},Object(n.e)("Classroom",{classrooms:function(t){return t.classrooms},classroomLoading:function(t){return t.loading},students:function(t){return t.students}}),Object(n.e)("Student",{studentLoading:function(t){return t.loading}}),Object(n.e)("Site",{windowWidth:function(t){return t.windowSize.width}}),Object(n.c)("Classroom",["classroomMap"]),Object(n.c)("Site",["isMobile"]),{classroomName:function(){return this.classroomMap[this.classId]||"..."},studentFormTitle:function(){return(this.isNew.student?"新增":"修改")+"學生"},classroomFormTitle:function(){return(this.isNew.classroom?"新增":"修改")+"班級"},classroomOptions:function(){return D()(this.classroomMap).map(function(t){var e=G()(t,2),s=e[0];return{label:e[1],value:s}})},studentKeys:function(){return T()(this.studnetAttributes)},studentData:function(){var t=this;return this.students.map(function(e){return p()({},e,{classroom:t.getAttr(e.class_id,t.classroomMap)})})},classroomFormProp:function(){var t=this.classId;return{class_id:t,name:this.classroomMap[t]}},pieConfig:function(){return{type:"pie",data:{datasets:[{data:this.students.map(function(t){return 1}),backgroundColor:Q.main}],labels:this.students.map(function(t){return t.first_name+" "+t.last_name})},options:{responsive:!0,legend:{display:!1},title:{display:!1}}}}}),methods:p()({},Object(n.b)("Classroom",["loadClassrooms","createClassroom","updateClassroom","loadClassStudents"]),Object(n.b)("Student",["createStudent","updateStudent","showStudent"]),{openStudentForm:function(t){var e=t.isNew,s=t.student;a.default.set(this.isNew,"student",e||!1),this.studentForm=e?{}:p()({},s),a.default.set(this.dialogVisible,"student",!0)},handleLoadClassStudents:function(){this.loadClassStudents(this.classId)},getAttr:function(t,e){return(e=e||this.studnetAttributes)[t]||t},submitStudentForm:function(t){var e=this;this.studentLoading.edit||this.$refs[t].validate(function(t){if(!t)return!1;e.isNew.student?e.handleCreateStudent():e.handleUpdateStudent()})},handleCreateStudent:function(){var t=this,e=this.studentForm;this.createStudent({payload:e,successCallback:function(s){t.$message.success("成功新增學生","成功"),e.class_id===t.classId?t.handleLoadClassStudents():(t.handleLoadClassStudents(),t.$router.push({name:"classroom.show",params:{classId:e.class_id}})),a.default.set(t.dialogVisible,"student",!1)},errorCallback:function(){t.$message.error("新增學生失敗","失敗"),a.default.set(t.dialogVisible,"student",!1)}})},handleUpdateStudent:function(){var t=this,e=this.studentForm;this.updateStudent({payload:e,successCallback:function(s){t.$message.success("成功更新學生","成功"),e.class_id===t.classId?t.handleLoadClassStudents():t.$router.push({name:"classroom.show",params:{classId:e.class_id}}),a.default.set(t.dialogVisible,"student",!1)},errorCallback:function(){t.$message.error("更新學生失敗","失敗"),a.default.set(t.dialogVisible,"student",!1)}})},openClassroomForm:function(t){var e=t.isNew;a.default.set(this.isNew,"classroom",e||!1),this.classroomForm=e?{}:p()({},this.classroomFormProp),a.default.set(this.dialogVisible,"classroom",!0)},submitClassroomForm:function(t){var e=this;this.classroomLoading.edit||this.$refs[t].validate(function(t){if(!t)return!1;e.isNew.classroom?e.handleCreateClassroom():e.handleUpdateClassroom()})},handleCreateClassroom:function(){var t=this,e=this.classroomForm;this.createClassroom({payload:e,successCallback:function(e){t.$message.success("創建班級成功，開始新增學生吧！"),t.$router.push({name:"classroom.show",params:{classId:e.class_id}}),t.studentForm={},t.loadClassrooms(),a.default.set(t.dialogVisible,"classroom",!1)},errorCallback:function(){t.$message.error("創建班級失敗")}})},handleUpdateClassroom:function(){var t=this,e=p()({},this.classroomForm,{id:this.classId});this.updateClassroom({payload:e,successCallback:function(){t.$message({message:"更新班級成功！",type:"success"}),t.handleLoadClassStudents(),t.loadClassrooms(),a.default.set(t.dialogVisible,"classroom",!1)},errorCallback:function(){t.$message.error("更新班級失敗")}})},handleQueryString:function(t){var e=this;if(t){this.showStudent({id:t,successCallback:function(t){e.openStudentForm({isNew:!1,student:t.data})},errorCallback:function(t){e.$message({message:t.message,type:"error"})}})}}}),watch:{classId:function(t){this.loadClassrooms(),this.handleLoadClassStudents()}},beforeRouteUpdate:function(t,e,s){var a=t.query.student;a&&this.handleQueryString(a),s()},mounted:function(){this.handleLoadClassStudents(),this.handleQueryString(this.$route.query.student)}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("el-row",{staticClass:"row"},[s("el-header",{staticClass:"header-classroom"},[s("h1",{staticClass:"page-title"},[t._v("\n        "+t._s(t.classroomName)+"\n      ")]),t._v(" "),s("div",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.openClassroomForm({isNew:!1})}}},[t._v("\n          編輯\n        ")]),t._v(" "),s("el-button",{on:{click:function(e){t.openClassroomForm({isNew:!0})}}},[t._v("\n          新增班級\n        ")]),t._v(" "),s("el-button",{on:{click:function(e){t.openStudentForm({isNew:!0})}}},[t._v("\n          新增學生\n        ")])],1)]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.classroomLoading.studentList,expression:"classroomLoading.studentList"}],staticClass:"container"},[s("el-table",{attrs:{data:t.students,"empty-text":"查無資料"}},[t._l(t.studentKeys,function(e){return s("el-table-column",{key:e.id,attrs:{prop:e,label:t.getAttr(e),align:"center",sortable:""}})}),t._v(" "),s("el-table-column",{attrs:{label:"動作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{on:{click:function(s){t.openStudentForm({isNew:!1,student:e.row})}}},[t._v("\n              修改\n            ")])]}}])})],2)],1),t._v(" "),s("el-dialog",{attrs:{title:t.classroomFormTitle,visible:t.dialogVisible.classroom},on:{"update:visible":function(e){t.$set(t.dialogVisible,"classroom",e)}}},[s("el-form",{ref:"classroomForm",attrs:{model:t.classroomForm,rules:t.rules.classroom,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"班級名稱",prop:"name"}},[s("el-input",{model:{value:t.classroomForm.name,callback:function(e){t.$set(t.classroomForm,"name",e)},expression:"classroomForm.name"}})],1),t._v(" "),s("el-form-item",[t.classroomLoading.edit?s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.classroomLoading.edit,expression:"classroomLoading.edit"}],attrs:{type:"primary"}},[s("span",[t._v("處理中...")])]):t._e(),t._v(" "),t.classroomLoading.edit?t._e():s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitClassroomForm("classroomForm")}}},[s("span",[t._v(t._s(t.classroomFormTitle))])])],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.studentFormTitle,visible:t.dialogVisible.student},on:{"update:visible":function(e){t.$set(t.dialogVisible,"student",e)}}},[s("div",[s("el-container",{staticClass:"container"},[s("div",{staticClass:"student-create-form"},[s("el-form",{ref:"studentForm",attrs:{model:t.studentForm,rules:t.rules.student,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"名字",prop:"first_name"}},[s("el-input",{model:{value:t.studentForm.first_name,callback:function(e){t.$set(t.studentForm,"first_name",e)},expression:"studentForm.first_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"姓氏",prop:"last_name"}},[s("el-input",{model:{value:t.studentForm.last_name,callback:function(e){t.$set(t.studentForm,"last_name",e)},expression:"studentForm.last_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Email",prop:"email"}},[s("el-input",{model:{value:t.studentForm.email,callback:function(e){t.$set(t.studentForm,"email",e)},expression:"studentForm.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"班級",prop:"class_id"}},[s("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.studentForm.class_id,callback:function(e){t.$set(t.studentForm,"class_id",e)},expression:"studentForm.class_id"}},t._l(t.classroomOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.label,value:t.value,"default-first-option":!0}})}))],1),t._v(" "),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.studentLoading.edit,expression:"studentLoading.edit"}],attrs:{type:"primary"},on:{click:function(e){t.submitStudentForm("studentForm")}}},[t.studentLoading.edit?s("span",[t._v("處理中...")]):t._e(),t._v(" "),t.studentLoading.edit?t._e():s("span",[t._v(t._s(t.studentFormTitle))])])],1)],1)],1)])],1)])],1),t._v(" "),s("el-row",{staticClass:"row mt-lg"},[s("el-col",{attrs:{span:24}},[s("el-header",{staticClass:"header-analysis"},[s("h1",{staticClass:"page-title"},[t._v("學生分析")])])],1),t._v(" "),s("el-col",{attrs:{span:t.isMobile?24:12}},[s("div",{staticClass:"pie-chart-wrapper",attrs:{width:t.isMobile?t.windowWidth:"600px"}},[s("ChartPie",{attrs:{"pie-config":t.pieConfig}})],1)]),t._v(" "),s("el-col",{attrs:{span:t.isMobile?24:12}},[s("div",{staticClass:"analysis-text"},[t._v("\n        總共: "+t._s(t.students.length)+"位學生\n      ")])])],1)],1)},staticRenderFns:[]};var ot={path:"/classroom/:classId",name:"classroom.show",component:s("VU/8")(nt,it,!1,function(t){s("qJ06")},"data-v-c7e4e8a6",null).exports,props:!0},rt=s("Gu7T"),lt=s.n(rt),ut={props:{image:{type:Object,default:function(){return{src:"",rawSrc:"",class:[],id:"",name:"",showNameSuffix:!1,rjs:!1}}},index:Number,figure:{type:Object,default:function(){return{class:[]}}},rellax:Boolean},data:function(){return{nameSuffix:"",imagePath:""}},computed:{className:function(){var t=this.image.class;return void 0===t?"":"string"==typeof t?[].concat(lt()(t.split(" ")),[""]):Array.isArray(t)?[].concat(lt()(t),[""]):""},imageTitle:function(){var t=this.image,e=t.name;return t.showNameSuffix?e+this.nameSuffix:e},imageSrc:function(){return this.image.src||this.imagePath+"/"+this.image.rawSrc}}},dt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("figure",{class:this.figure.class},[e("img",{class:this.className,attrs:{src:this.imageSrc,alt:this.imageTitle||!1,title:this.imageTitle||!1,id:this.image.id}}),this._v(" "),this._t("default")],2)},staticRenderFns:[]},ct={data:function(){return{path:window.location.pathname,pageNotFoundSrc:"https://cdn.dribbble.com/users/256715/screenshots/3621943/404bath.gif"}},components:{BaseImage:s("VU/8")(ut,dt,!1,null,null,null).exports}},mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center"},[e("BaseImage",{attrs:{image:{src:this.pageNotFoundSrc,class:"limit-height-xs"}}}),this._v(" "),this._m(0),this._v(" "),e("div",[e("router-link",{attrs:{to:{name:"homepage"}}},[this._v("\n      However, you can come back home!\n    ")]),this._v(" "),e("p",[this._v("\n      (Route path is "),e("router-link",{attrs:{to:{path:this.path}}},[this._v(this._s(this.path))]),this._v(")\n    ")],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h1",[this._v("Page Not Found")])])}]},ft=[{path:"/",name:"homepage",component:k},H,ot,{path:"*",name:"pageNotFound",component:s("VU/8")(ct,mt,!1,null,null,null).exports}],pt=new i.a({mode:"history",routes:ft}),ht={modules:{Site:{namespaced:!0,state:{windowSize:{width:window.innerWidth,height:window.innerHeight}},getters:{isMobile:function(t){return t.windowSize.width<768}},mutations:{updateWindow:function(t,e){t.windowSize=e}}},Student:{namespaced:!0,state:{student:{first_name:"",last_name:"",email:"",class_id:""},isFormNew:!1,loading:{edit:!1,list:!1,show:!1}},mutations:{updateLoading:function(t,e){var s=e.loadingKey,a=e.status;t.loading[s]=a},updateStudent:function(t,e){t.student=e}},actions:{createStudent:function(t,e){var s=t.commit,a=(t.state,e.payload),n=e.successCallback,i=e.errorCallback,o=N();s("updateLoading",{loadingKey:"edit",status:!0}),m.a.post(o,a).then(function(t){var e=t.data;setTimeout(function(t){s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof n&&n(e)},500)}).catch(function(t){var e=t.response;s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof i&&i(e)})},updateStudent:function(t,e){var s=t.commit,a=e.id,n=e.payload,i=e.successCallback,o=e.errorCallback,r=O(a||n.id);s("updateLoading",{loadingKey:"edit",status:!0}),m.a.put(r,n).then(function(t){var e=t.data;setTimeout(function(t){s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof i&&i(e)},500)}).catch(function(t){var e=t.response;s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof o&&o(e)})},showStudent:function(t,e){var s=t.commit,a=e.id,n=e.successCallback,i=e.errorCallback,o=L(a);s("updateLoading",{loadingKey:"show",status:!0}),m.a.get(o).then(function(t){var e=t.data;s("updateStudent",e.data),s("updateLoading",{loadingKey:"show",status:!1}),"function"==typeof n&&n(e)}).catch(function(t){var e=t.response;s("updateLoading",{loadingKey:"show",status:!1}),"function"==typeof i&&i(e)})}}},Classroom:{namespaced:!0,state:{pageName:"",classrooms:[],students:[],loading:{classrooms:!1,studentList:!1,edit:!1}},getters:{classroomMap:function(t){return Object(t.classrooms).reduce(function(t,e){var s=e.id,a=e.name;return t[s]=a,t},{})}},mutations:{updatePageName:function(t,e){t.pageName=e},setClassrooms:function(t,e){t.classrooms=e},updateClassroom:function(t,e){t.classroom=e},updateLoading:function(t,e){var s=e.loadingKey,a=e.status;t.loading[s]=a},updateStudents:function(t,e){t.students=e}},actions:{loadClassrooms:function(t){var e=t.commit,s=(t.state,z());e("updateLoading",{loadingKey:"classrooms",status:!0}),m.a.get(s).then(function(t){var s=t.data;e("setClassrooms",s.data),e("updateLoading",{loadingKey:"classrooms",status:!1})}).catch(function(t){e("updateLoading",{loadingKey:"classrooms",status:!1})})},createClassroom:function(t,e){var s=t.commit,a=(t.state,e.payload),n=e.successCallback,i=e.errorCallback,o=E();s("updateLoading",{loadingKey:"edit",status:!0}),m.a.post(o,a).then(function(t){var e=t.data;setTimeout(function(t){s("updateClassroom",e.data),s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof n&&n(e)},500)}).catch(function(t){var e=t.response;s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof i&&i(e)})},updateClassroom:function(t,e){var s=t.commit,a=(t.state,e.payload),n=e.id,i=e.successCallback,o=e.errorCallback,r=q(n||a.id);s("updateLoading",{loadingKey:"edit",status:!0}),m.a.put(r,a).then(function(t){var e=t.data;setTimeout(function(t){s("updateClassroom",e.data),s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof i&&i(e)},500)}).catch(function(t){var e=t.response;s("updateLoading",{loadingKey:"edit",status:!1}),"function"==typeof o&&o(e)})},loadClassStudents:function(t,e){var s=t.commit,a=(t.state,R(e));s("updateLoading",{loadingKey:"studentList",status:!0}),m.a.get(a).then(function(t){var e=t.data;s("updateStudents",e.data),s("updateLoading",{loadingKey:"studentList",status:!1})}).catch(function(t){s("updateLoading",{loadingKey:"studentList",status:!1})})}}},Search:{namespaced:!0,state:{keyword:"",timeout:null,rawResult:[]},getters:{result:function(t){return D()(t.rawResult).reduce(function(t,e){var s=G()(e,2),a=s[0];return s[1].reduce(function(e,s){return t.push({value:"students"===a?s.first_name+" "+s.last_name:s.name,role:a,data:p()({},s)}),t},t)},[])}},mutations:{setRawResult:function(t,e){t.rawResult=e},setKeyword:function(t,e){t.keyword=e},setSearchTimeout:function(t,e){t.timeout=e}},actions:{search:function(t){var e=t.commit,s=t.state,a=K();m.a.get(a+"?keyword="+s.keyword).then(function(t){var s=t.data;e("setRawResult",s.data)})}}}}};a.default.config.productionTip=!1,a.default.use(n.a),a.default.use(i.a),a.default.use(l.a),a.default.use(d.a);var gt=new n.a.Store(ht);Object(o.sync)(gt,pt),m.a.defaults.headers["X-Requested-With"]="XMLHttpRequest",m.a.defaults.headers["Content-type"]="application/json",m.a.defaults.headers.Accept="application/json",new a.default({store:gt,router:pt,render:function(t){return t(j)}}).$mount("#root")},SSNS:function(t,e){},WPnZ:function(t,e){},qJ06:function(t,e){},tvR6:function(t,e){},uR6f:function(t,e){},uslO:function(t,e,s){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function n(t){return s(i(t))}function i(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="uslO"},wkMQ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.83b857d97cb5c15dff5d.js.map